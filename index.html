<html>
<head>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
  <h2>Image pull statistics</h2>
  <div id="graph" style="width:100%;height:80%;"></div>
  <script>
    var csv_path = 'https://raw.githubusercontent.com/l7mp/image-pull-stats/refs/heads/main/pull-stats.csv';
    Plotly.d3.csv(csv_path, function(data) {
        var stunnerd = {
            x: data.map(row => row['date'] + "T12:00"),
            y: data.map(row => row['stunnerd']),
            type: 'lines+markers',
            name: 'l7mp/stunnerd',
            marker: {
                color: 'rgb(66,133,244)',
                size: 10
            },
            line: {
                color: 'rgb(66,133,244)',
                width: 2
            }
        };
        var stunnerGatewayOperator = {
            x: data.map(row => row['date'] + "T12:00"),
            y: data.map(row => row['stunner-gateway-operator']),
            type: 'lines+markers',
            name: 'l7mp/stunner-gateway-operator',
            marker: {
                color: 'rgb(234,67,53)',
                size: 10
            },
            line: {
                color: 'rgb(234,67,53)',
                width: 2
            }
        };
        var stunnerAuthServer = {
            x: data.map(row => row['date'] + "T12:00"),
            y: data.map(row => row['stunner-auth-server']),
            type: 'lines+markers',
            name: 'l7mp/stunner-auth-server',
            marker: {
                color: 'rgb(255,188,5)',
                size: 10
            },
            line: {
                color: 'rgb(255,188,5)',
                width: 2
            }
        };
        var netDebug = {
            x: data.map(row => row['date'] + "T12:00"),
            y: data.map(row => row['net-debug']),
            type: 'lines+markers',
            name: 'l7mp/net-debug',
            marker: {
                color: 'rgb(52,168,83)',
                size: 10
            },
            line: {
                color: 'rgb(52,168,83)',
                width: 2
            }
        };
        var layout = {
            title: 'Image Pulls',
        };
        Plotly.newPlot('graph',
            [stunnerd, stunnerGatewayOperator, stunnerAuthServer, netDebug],
            layout
        );
    });
  </script>
  <div>More info: <a href="https://github.com/l7mp/image-pull-stats">github</a></div>
</body>
</html>
